{% extends 'static/inicio.html' %}
{% load crispy_forms_tags %}
{% block contenido %} 

<body>
    <br>
    <br>
    <div class="container mt-18" style="width: 95%; font-size:14px">
    <form action="" method="POST" class="card p-3 mt-5" autocomplete="on" novalidate> {% csrf_token %}
        <div class="card border-dark p-3"> 
            <span class="btn btn-secondary mb-4"><strong>ALTA CARRERA</strong></span>   
            <div class="row">
                <div class="col-4"><strong>{{form.carrera|as_crispy_field}}</strong></div>
                <div class="col-4"><strong>{{form.codigo|as_crispy_field}}</strong></div>
                <div class="col-4"><strong>{{form.tipo_carrera|as_crispy_field}}</strong></div>
            </div>
            <div class="row">
                <div class="col-4"><strong>{{form.plan_de_estudio|as_crispy_field}}</strong></div>
                <div class="col-4"><strong>{{form.resolucion_rectoral|as_crispy_field}}</strong></div>
                <div class="col-4"><strong>{{form.cantidad_asignaturas|as_crispy_field}}</strong></div>
            </div>
            <hr style="border: 1px solid black;">
            <span class="btn btn-secondary mb-4">ESTRUCTURA CURRICULAR DE LA CARRERA</span> 
            {{ form2.management_form|crispy }}
            {% for form2 in form2 %}
                <div class="row" >
                    <div class="col-2">{{form2.anio_semestre|as_crispy_field}}</div>
                    <div class="col-2">{{form2.asignatura1|as_crispy_field}}</div>
                    <div class="col-2">{{form2.asignatura2|as_crispy_field}}</div>
                    <div class="col-2">{{form2.asignatura3|as_crispy_field}}</div>
                    <div class="col-2">{{form2.asignatura4|as_crispy_field}}</div>
                    <div class="col-2">{{form2.asignatura5|as_crispy_field}}</div>
                </div>
                <div class="row" id='formularioagregar'></div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button onclick="AgregarFila()" class="btn btn-outline-secondary btn-sm mt-1" style="width:80px">Agregar</button> 
            </div>
            {% endfor %}
            <hr style="border: 1px solid black;">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-outline-secondary btn-lg mt-3" style="width:120px" value='Guardar'>Guardar</button> 
            </div>
    <br>     
    {% for message in messages %}
        {% if message.tags == 'success' %}
            <div class="text-center alert alert-primary alert-dismissible fade show" role="alert"><stong>{{message}}</strong>
                <a href="{% url "altacarrera" %}" type="button" class="btn btn-close" data-bs-dismissible="alert" aria-label="Close"></a>
            </div>
        {% endif %}
    {% endfor %} 
        </div>
    </form>
    </div>
    <script>
        function AgregarFila() {
            var forms=document.querySelector ('#id_form-TOTAL_FORMS') 
            var agregarfila = document.querySelector("#id_form-0-anio_semestre").cloneNode(true);
            agregarfila.name='form-'+forms.value+'-anio_semestre';
            agregarfila.id='id_form-'+forms.value+'-anio_semestre';
            document.querySelector('#formularioagregar').appendChild(agregarfila);
        }
    </script>
</body>
{% endblock %}
